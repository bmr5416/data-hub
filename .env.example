# =============================================================================
# DATA HUB - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
#
# LOCAL DEVELOPMENT:
#   Run `supabase status` to get Supabase credentials
#
# VERCEL DEPLOYMENT:
#   Add these in: Vercel Dashboard > Project > Settings > Environment Variables
#   Required variables are marked with [REQUIRED]
# =============================================================================

# -----------------------------------------------------------------------------
# Supabase Configuration [REQUIRED]
# -----------------------------------------------------------------------------
# Local development: http://127.0.0.1:54321
# Production: https://your-project.supabase.co
SUPABASE_URL=http://127.0.0.1:54321
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_ANON_KEY=your-anon-key

# JWT Secret - ONLY required for local development (Supabase CLI uses HS256)
# Production Supabase Cloud uses ES256 asymmetric keys via JWKS endpoint
# Get from: `supabase status` (local) or not needed (production)
SUPABASE_JWT_SECRET=your-jwt-secret

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3001
NODE_ENV=development
# For Vercel: Set to your deployment URL (e.g., https://data-hub.vercel.app)
FRONTEND_URL=http://localhost:5173
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# SMTP Configuration (for report delivery)
# -----------------------------------------------------------------------------
# Required for email delivery functionality
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=apikey
# SMTP_PASS=your-smtp-password
# SMTP_FROM_EMAIL=reports@yourdomain.com
# SMTP_FROM_NAME=Data Hub Reports

# -----------------------------------------------------------------------------
# Scheduler Configuration
# -----------------------------------------------------------------------------
# Note: On Vercel, scheduling uses Vercel Cron Jobs (configured in vercel.json)
# These settings are for local development only
SCHEDULER_ENABLED=true
SCHEDULER_TIMEZONE=America/New_York

# -----------------------------------------------------------------------------
# Vercel Tier Configuration
# -----------------------------------------------------------------------------
# Vercel Hobby (Free): Daily crons only - uses /api/cron/daily (9am UTC)
# Vercel Pro ($20/mo): Hourly/15-min crons - uses /api/cron/reports + /api/cron/alerts
#
# Current vercel.json is configured for HOBBY tier.
# To upgrade to Pro tier, update vercel.json "crons" section:
#   "crons": [
#     { "path": "/api/cron/reports", "schedule": "0 * * * *" },
#     { "path": "/api/cron/alerts", "schedule": "*/15 * * * *" }
#   ]
VERCEL_TIER=hobby

# -----------------------------------------------------------------------------
# Security (optional)
# -----------------------------------------------------------------------------
# Encryption key for storing SMTP passwords in database (32 chars hex)
# Generate with: openssl rand -hex 16
# ENCRYPTION_KEY=

# Secret for manually triggering cron jobs in production (for testing)
# Generate with: openssl rand -hex 32
# CRON_SECRET=

# =============================================================================
# CLIENT CONFIGURATION (create client/.env with these)
# =============================================================================
# For Vercel: Add with VITE_ prefix in environment variables
# VITE_API_URL=/api
# VITE_SUPABASE_URL=http://127.0.0.1:54321
# VITE_SUPABASE_ANON_KEY=your-anon-key

# =============================================================================
# VERCEL DEPLOYMENT CHECKLIST
# =============================================================================
# 1. Set NODE_ENV=production
# 2. Set FRONTEND_URL to your Vercel domain
# 3. Set SUPABASE_URL to your Supabase Cloud project URL
# 4. Set SUPABASE_SERVICE_ROLE_KEY from Supabase Dashboard > Settings > API
# 5. Set SCHEDULER_ENABLED=false (Vercel uses Cron Jobs instead)
# 6. Configure SMTP for email delivery (optional)
# 7. Add VITE_ prefixed variables for client-side
#
# NOTE: SUPABASE_JWT_SECRET is NOT needed for production.
# Supabase Cloud uses ES256 asymmetric keys - the backend verifies JWTs
# via the JWKS endpoint automatically.
# =============================================================================
